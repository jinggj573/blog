<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.insit.mark.blog.business.dao.SrvResourcesMapper">
  <resultMap id="BaseResultMap" type="com.insit.mark.blog.common.persistence.model.Resources">
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="resUrl" jdbcType="VARCHAR" property="resurl" />
    <result column="type" jdbcType="INTEGER" property="type" />
    <result column="parentId" jdbcType="INTEGER" property="parentid" />
    <result column="sort" jdbcType="INTEGER" property="sort" />
  </resultMap>
  <sql id="Base_Column_List">
    id, name, resUrl, type, parentId, sort
  </sql>
  <select id="findResource" parameterType="java.lang.String" resultMap="BaseResultMap">
      select t.* from user u
      INNER JOIN user_role r on u.id=r.userId
      INNER JOIN role f on r.roleId=f.id
      INNER JOIN role_resources g on f.id=g.roleId
      INNER JOIN resources t on t.id=g.resourcesId
      WHERE u.username=#{userName} and u.enable=1

  </select>

</mapper>